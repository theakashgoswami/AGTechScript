let lastScrollY=0,ticking=!1;function initHeader(){let e=document.querySelector("header"),t=document.getElementById("navToggle"),n=document.getElementById("mainNav"),i=document.querySelectorAll(".nav-menu a");if(console.log("\uD83D\uDD0D Looking for header elements:",{header:e?"✅":"❌",navToggle:t?"✅":"❌",navbar:n?"✅":"❌",navLinks:i.length>0?"✅":"❌"}),!e||!t||!n){console.warn("⚠️ Header elements not found, will retry in 500ms"),setTimeout(function(){let e=document.querySelector("header"),t=document.getElementById("navToggle"),n=document.getElementById("mainNav"),i=document.querySelectorAll(".nav-menu a");e&&t&&n?(console.log("✅ Header elements found on retry"),initializeHeaderLogic(e,t,n,i)):(console.error("❌ Header elements still not found after retry"),console.log("Trying one more time with longer delay..."),setTimeout(function(){let e=document.querySelector("header"),t=document.getElementById("navToggle"),n=document.getElementById("mainNav"),i=document.querySelectorAll(".nav-menu a");e&&t&&n?(console.log("✅ Header elements found on final retry"),initializeHeaderLogic(e,t,n,i)):console.error("❌ Cannot find header elements. Check if header HTML is loaded properly.")},1e3))},500);return}initializeHeaderLogic(e,t,n,i)}function initializeHeaderLogic(e,t,n,i){console.log("\uD83D\uDE80 Header initialized successfully"),console.log("Nav toggle button:",t),console.log("Navbar element:",n);let a=window.scrollY,l=!1,s=0,r=0;function o(){let t=window.scrollY;t>a&&t>100?(e.style.transform="translateY(-100%)",e.classList.add("header-hidden")):(e.style.transform="translateY(0)",e.classList.remove("header-hidden")),a=t,l=!1}t.onclick=function(e){return e.preventDefault(),e.stopPropagation(),n.classList.toggle("active"),console.log("Menu toggled:",n.classList.contains("active")?"open":"closed"),!1},t.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),n.classList.toggle("active"),console.log("Menu toggled (event):",n.classList.contains("active")?"open":"closed")}),window.addEventListener("scroll",function(){l||(requestAnimationFrame(o),l=!0)}),document.addEventListener("click",function(e){!e.target.closest(".header-wrapper")&&n.classList.contains("active")&&(n.classList.remove("active"),console.log("Menu closed by outside click"))}),i&&i.length>0&&i.forEach(e=>{e.addEventListener("click",function(){window.innerWidth<=768&&(n.classList.remove("active"),console.log("Menu closed by link click"))})}),document.addEventListener("touchstart",function e(t){s=t.changedTouches[0].screenY},{passive:!0}),document.addEventListener("touchend",function t(n){if(window.innerWidth>768)return;r=n.changedTouches[0].screenY;let i=r-s;i>50&&"translateY(-100%)"===e.style.transform&&(e.style.transform="translateY(0)",e.classList.remove("header-hidden")),i<-50&&"translateY(0)"===e.style.transform&&(e.style.transform="translateY(-100%)",e.classList.add("header-hidden"))},{passive:!0}),window.addEventListener("resize",function(){window.innerWidth>768?(n.classList.remove("active"),e.style.transform="translateY(0)",e.classList.remove("header-hidden")):(e.style.transform="translateY(0)",e.classList.remove("header-hidden"))}),document.addEventListener("keydown",function(t){"Space"!==t.code||t.target.matches("input, textarea, button, a")||(t.preventDefault(),"translateY(-100%)"===e.style.transform?(e.style.transform="translateY(0)",e.classList.remove("header-hidden")):(e.style.transform="translateY(-100%)",e.classList.add("header-hidden")))}),window.innerWidth<=768&&n.classList.remove("active")}function initRevealAnimation(){let e=document.querySelectorAll(".reveal");if(0===e.length){console.warn("⚠️ No reveal elements found");return}function t(){let t=window.innerHeight;e.forEach(e=>{if(e.classList.contains("ag-footer")){e.classList.add("active");return}let n=e.getBoundingClientRect().top,i=e.getBoundingClientRect().bottom;n<t-150&&i>150?e.classList.add("active"):e.classList.remove("active")})}console.log("✅ Reveal animation initialized"),window.addEventListener("scroll",t),window.addEventListener("resize",t),setTimeout(t,100)}function initAGTextAnimation(){let e=[{A:"kash",G:"oswami"},{A:"dvanced",G:"eneration"}],t=0,n=document.getElementById("Atext"),i=document.getElementById("Gtext");if(!n||!i){console.warn("⚠️ AG text elements not found");return}function a(e,t){n.textContent=e,i.textContent=t;let a=e?n.scrollWidth+"px":"0px",l=t?i.scrollWidth+"px":"0px";n.style.maxWidth=a,i.style.maxWidth=l,n.style.opacity=e?"1":"0",i.style.opacity=t?"1":"0"}console.log("✅ AG text animation initialized"),a("",""),setTimeout(function l(){let s=e[t];a(s.A,s.G),setTimeout(()=>{n.style.maxWidth=n.scrollWidth+"px",i.style.maxWidth=i.scrollWidth+"px",n.getBoundingClientRect(),i.getBoundingClientRect(),n.style.maxWidth="0px",i.style.maxWidth="0px",n.style.opacity="0",i.style.opacity="0",setTimeout(()=>{t=(t+1)%e.length,l()},1200)},2200)},1e3)}function initStoriesSlider(){let e=document.querySelectorAll(".story-card");if(0===e.length){console.warn("⚠️ No stories found");return}console.log("✅ Stories slider initialized with",e.length,"cards");let t=0;e.forEach(e=>{e.classList.remove("active","prev")}),e[0].classList.add("active"),setInterval(()=>{var n;n=t=(t+1)%e.length,e.forEach((t,i)=>{t.classList.remove("active","prev"),i===n?t.classList.add("active"):(i===n-1||0===n&&i===e.length-1)&&t.classList.add("prev")})},3200)}function initFloatingElements(){let e=document.querySelectorAll(".floating-element");0!==e.length&&(console.log("✅ Floating elements initialized"),e.forEach((e,t)=>{e.style.animationDelay=`${.5*t}s`}))}document.addEventListener("DOMContentLoaded",function(){console.log("✅ Main.js loaded"),setTimeout(function(){initHeader()},300),initRevealAnimation(),initAGTextAnimation(),initStoriesSlider(),initFloatingElements()}),window.initializeHeader=initHeader,window.initializeReveal=initRevealAnimation;